<!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd">

<!-- Author: sulic -->

<struts>
    <include file="admin.xml" />
    <include file="user.xml"/>
    <include file="public.xml" />
    <!-- Add your configuration elements here -->
    <package name="main" namespace="/" extends="struts-default">

        <interceptors>
            <interceptor name="initem" class="com.rsc.moneta.interceptor.InitEntityManager"/>
            <interceptor-stack name="main">
                <interceptor-ref name="defaultStack"/>
                <interceptor-ref name="initem"/>
            </interceptor-stack>
        </interceptors>
        <default-interceptor-ref name="main" />

        <default-action-ref name="Login"></default-action-ref>

        <action name="Login">
            <result type="redirectAction">public/</result>
        </action>

        <action name="Assistant" class="com.rsc.moneta.action.Assistant">
            <result name="error">/pages/error.jsp</result>
            <result name="success">/pages/requestEmail.jsp</result>
            <result name="next">/pages/selectPaymentSystem.jsp</result>
        </action>

        <action name="RegisterOrLogin" class="com.rsc.moneta.action.RegisterOrLogin" >
            <result name="success">/pages/selectPaymentSystem.jsp</result>
            <result name="error">/pages/error.jsp</result>
            <result name="again">/pages/requestEmail.jsp</result>
            <result name="login" type="redirectAction" >public/LoginForm</result>
        </action>

        <action name="SelectPaymentSystem" class="com.rsc.moneta.action.SelectPaymentSystem">
            <result name="class_a">/pages/goToTerminal.jsp</result>
            <result name="webmoney">/pages/notSupportedPS.jsp</result>
            <result name="yandex">/pages/notSupportedPS.jsp</result>
        </action>

        <action name="webmoneyResult" class="com.rsc.moneta.action.webmoney.Result">
            <result name="success">/pages/webmoney/resultSuccess.jsp</result>
            <result name="input">/pages/webmoney/resultError.jsp</result>
            <result name="error">/pages/webmoney/resultError.jsp</result>
        </action>

        <action name="webmoneyPay" class="com.rsc.moneta.action.webmoney.Pay">
            <result name="success">/pages/webmoney/paySuccess.jsp</result>
            <result name="input">/pages/webmoney/payError.jsp</result>
            <result name="error">/pages/webmoney/payError.jsp</result>
        </action>

        <action name="webmoneyFail" class="com.rsc.moneta.action.webmoney.Pay">
            <result name="success">/pages/webmoney/failSuccess.jsp</result>
            <result name="input">/pages/webmoney/failError.jsp</result>
            <result name="error">/pages/webmoney/failError.jsp</result>
        </action>
    </package>
</struts>
